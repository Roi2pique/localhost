<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Rust HTTP Server</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 2rem;
        }

        h1,
        h2 {
            color: #333;
        }

        form {
            margin-bottom: 2rem;
        }
    </style>
</head>

<body>
    <h1>ü¶Ä Welcome to Your Rust Web Server</h1>

    <h2>üì§ Upload a File</h2>
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="file">
        <button type="submit">Upload</button>
    </form>

    <h2>üóëÔ∏è Delete a File</h2>
    <form onsubmit="event.preventDefault(); 
        const filename = this.filename.value;
        fetch(`/upload/${filename}`, { method: 'DELETE' })
            .then(response => {
                if (response.ok) {
                    // Store a flag before reloading
                    sessionStorage.setItem('deleted', 'true');
                    window.location.reload();
                } else {
                    alert('Error deleting file: ' + response.status);
                }
            })
            .catch(err => alert('Error: ' + err));
    ">
        <input type="text" name="filename" placeholder="e.g. file.txt" required />
        <button type="submit">Delete</button>
    </form>
    <script>
        // Check if a file was deleted
        if (sessionStorage.getItem('deleted') === 'true') {
            alert('File deleted successfully');
            sessionStorage.removeItem('deleted'); // Clear the flag
        }
    </script>

    <h2>Browse Uploaded Files Or Script</h2>
    <div id="file-list">
        ::FILE_LIST::
    </div>
    <div id="script">
        ::SCRIPT_LIST::
    </div>

    <footer style="margin-top: 3rem;">
        <hr>
        <p>Rust server !</p>
    </footer>
</body>

</html>